<div class="jumbotron">
	<h1> Github Release Tracker </h1>
</div>

<div ng-repeat="release in releases" style="margin:10px; float:left; width:45%;">
		<h2>{{ release.name }}</h2>
		<h4>Created: {{release.created_at | date:'medium'}}</h4>
		<table class="table table-condensed table-striped">
		<thead>
		<tr> 
			<th>Name</th>
			<th>Downloads</th>
		</tr>
		</thead>
		<tbody>
		<tr ng-repeat="asset in release.assets">
			<td>{{asset.name}}</td>
			<th>{{asset.download_count}}</th>
		</tr>
		</tbody>
		<tfoot>
			<tr>
				<th style='text-align:right'>Total:</th>
				<th>{{getTotal(release)}}</th>
			</tr>
		</tfoot>
		</table>
</div>

<div style='float:right; margin-right:50px;'>
	<div class="well sidebar-nav">    
	 <form>
	  <h4>Monitoring repositories</h4>
	  <ul class="nav">
	  	<li ng-repeat="project in projects"> 
	  	  <i class="glyphicon glyphicon-trash" ng-click="remove(project)"></i> {{project.username}}/{{project.repository}}
	  	</li>
	  </ul>
	</form>
	</div>

	<div class="well sidebar-nav" style='float:right; margin-right:50px;'>
	          
	 <form name="addForm" ng-controller="FormCtrl as form" ng-submit="form.submit(addForm.$valid, addForm.data)">
	  <span class="help-block">Watch a repository</span>
	  <label class="form-label">Github Username</label>
	  <input type="text" class="form-control" name="username" ng-model="form.username" minlength="2" username-exists-validator
       ng-model-options="{ debounce : { 'default' : 500, blur : 0 } }" required ng-change="form.valueChanged()" ng-blur="form.valueChanged()" />
       <div ng-if="addForm.username.$pending">
			Validating username
	  </div>
	  <div ng-if="!addForm.username.$valid">
	    Invalid username.
	  </div>
	  <div ng-if="addForm.username.$valid">
	  Valid username {{valueChanged()}}
	  </div>

	  <label class="form-label">Repository</label>
	  <select ng-disabled="form.repositories.length == 0" class='form-control' name="repositories" ng-model="form.repository" ng-options="repo.name for repo in form.repositories" required ng-change="form.repoChanged()">
	  </select>

	  <input type="submit" ng-disabled="!addForm.$valid" class="btn btn-success" value="Watch repository" style='margin-top:10px'/>
	</form>
	</div>
</div>